!function(e,t){"use strict";var a="undefined"!=typeof module;a&&(e=global);var n="0123456789abcdef".split(""),o=[-2147483648,8388608,32768,128],r=[24,16,8,0],i=[],s=function(e){var t="string"!=typeof e;t&&e.constructor==ArrayBuffer&&(e=new Uint8Array(e));var a,s,l,d,c,u,v,g,h,m,f=0,p=!1,w=0,$=0,y=0,b=e.length;a=1732584193,s=4023233417,l=2562383102,d=271733878,c=3285377520;do{if(i[0]=f,i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0,t)for(h=$;w<b&&h<64;++w)i[h>>2]|=e[w]<<r[3&h++];else for(h=$;w<b&&h<64;++w)u=e.charCodeAt(w),u<128?i[h>>2]|=u<<r[3&h++]:u<2048?(i[h>>2]|=(192|u>>6)<<r[3&h++],i[h>>2]|=(128|63&u)<<r[3&h++]):u<55296||u>=57344?(i[h>>2]|=(224|u>>12)<<r[3&h++],i[h>>2]|=(128|u>>6&63)<<r[3&h++],i[h>>2]|=(128|63&u)<<r[3&h++]):(u=65536+((1023&u)<<10|1023&e.charCodeAt(++w)),i[h>>2]|=(240|u>>18)<<r[3&h++],i[h>>2]|=(128|u>>12&63)<<r[3&h++],i[h>>2]|=(128|u>>6&63)<<r[3&h++],i[h>>2]|=(128|63&u)<<r[3&h++]);for(y+=h-$,$=h-64,w==b&&(i[h>>2]|=o[3&h],++w),f=i[16],w>b&&h<56&&(i[15]=y<<3,p=!0),m=16;m<80;++m)v=i[m-3]^i[m-8]^i[m-14]^i[m-16],i[m]=v<<1|v>>>31;var D=a,_=s,x=l,Y=d,k=c;for(m=0;m<20;m+=5)g=_&x|~_&Y,v=D<<5|D>>>27,k=v+g+k+1518500249+i[m]<<0,_=_<<30|_>>>2,g=D&_|~D&x,v=k<<5|k>>>27,Y=v+g+Y+1518500249+i[m+1]<<0,D=D<<30|D>>>2,g=k&D|~k&_,v=Y<<5|Y>>>27,x=v+g+x+1518500249+i[m+2]<<0,k=k<<30|k>>>2,g=Y&k|~Y&D,v=x<<5|x>>>27,_=v+g+_+1518500249+i[m+3]<<0,Y=Y<<30|Y>>>2,g=x&Y|~x&k,v=_<<5|_>>>27,D=v+g+D+1518500249+i[m+4]<<0,x=x<<30|x>>>2;for(;m<40;m+=5)g=_^x^Y,v=D<<5|D>>>27,k=v+g+k+1859775393+i[m]<<0,_=_<<30|_>>>2,g=D^_^x,v=k<<5|k>>>27,Y=v+g+Y+1859775393+i[m+1]<<0,D=D<<30|D>>>2,g=k^D^_,v=Y<<5|Y>>>27,x=v+g+x+1859775393+i[m+2]<<0,k=k<<30|k>>>2,g=Y^k^D,v=x<<5|x>>>27,_=v+g+_+1859775393+i[m+3]<<0,Y=Y<<30|Y>>>2,g=x^Y^k,v=_<<5|_>>>27,D=v+g+D+1859775393+i[m+4]<<0,x=x<<30|x>>>2;for(;m<60;m+=5)g=_&x|_&Y|x&Y,v=D<<5|D>>>27,k=v+g+k-1894007588+i[m]<<0,_=_<<30|_>>>2,g=D&_|D&x|_&x,v=k<<5|k>>>27,Y=v+g+Y-1894007588+i[m+1]<<0,D=D<<30|D>>>2,g=k&D|k&_|D&_,v=Y<<5|Y>>>27,x=v+g+x-1894007588+i[m+2]<<0,k=k<<30|k>>>2,g=Y&k|Y&D|k&D,v=x<<5|x>>>27,_=v+g+_-1894007588+i[m+3]<<0,Y=Y<<30|Y>>>2,g=x&Y|x&k|Y&k,v=_<<5|_>>>27,D=v+g+D-1894007588+i[m+4]<<0,x=x<<30|x>>>2;for(;m<80;m+=5)g=_^x^Y,v=D<<5|D>>>27,k=v+g+k-899497514+i[m]<<0,_=_<<30|_>>>2,g=D^_^x,v=k<<5|k>>>27,Y=v+g+Y-899497514+i[m+1]<<0,D=D<<30|D>>>2,g=k^D^_,v=Y<<5|Y>>>27,x=v+g+x-899497514+i[m+2]<<0,k=k<<30|k>>>2,g=Y^k^D,v=x<<5|x>>>27,_=v+g+_-899497514+i[m+3]<<0,Y=Y<<30|Y>>>2,g=x^Y^k,v=_<<5|_>>>27,D=v+g+D-899497514+i[m+4]<<0,x=x<<30|x>>>2;a=a+D<<0,s=s+_<<0,l=l+x<<0,d=d+Y<<0,c=c+k<<0}while(!p);return n[a>>28&15]+n[a>>24&15]+n[a>>20&15]+n[a>>16&15]+n[a>>12&15]+n[a>>8&15]+n[a>>4&15]+n[15&a]+n[s>>28&15]+n[s>>24&15]+n[s>>20&15]+n[s>>16&15]+n[s>>12&15]+n[s>>8&15]+n[s>>4&15]+n[15&s]+n[l>>28&15]+n[l>>24&15]+n[l>>20&15]+n[l>>16&15]+n[l>>12&15]+n[l>>8&15]+n[l>>4&15]+n[15&l]+n[d>>28&15]+n[d>>24&15]+n[d>>20&15]+n[d>>16&15]+n[d>>12&15]+n[d>>8&15]+n[d>>4&15]+n[15&d]+n[c>>28&15]+n[c>>24&15]+n[c>>20&15]+n[c>>16&15]+n[c>>12&15]+n[c>>8&15]+n[c>>4&15]+n[15&c]};if(e.JS_SHA1_TEST||"undefined"==typeof module)e&&(e.sha1=s);else{var l=require("crypto"),d=require("buffer").Buffer;module.exports=function(e){return"string"==typeof e?l.createHash("sha1").update(e,"utf8").digest("hex"):(e.constructor==ArrayBuffer&&(e=new Uint8Array(e)),l.createHash("sha1").update(new d(e)).digest("hex"))}}}(this),$(document).ready(function(){$("#save_general_settings").click(function(){var e=$("#general-settings-form").serialize();return console.log("voy a guardar"),console.log(e),$.ajax({url:app_url+"settings/settings/saveGeneralAjax",type:"POST",data:e,dataType:"json",success:function(e){console.log(e),e.error===!0?showErrorMessage("#setting-error-msg",e.msg,5e3):showSuccessMessage("#setting-positive-msg",e.msg,1e3)},error:function(e,t){console.log("Request: "+JSON.stringify(e)),console.log("Error: "+JSON.stringify(t))}}),!1})});var protocol=window.location.protocol,host=window.location.host,path=window.location.pathname,base=protocol+"//"+host,app_name=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/")),app_url=base+app_name+"/",base_url=protocol+"//"+host+path;$(document).ready(function(){function e(e,t,a){$(e).html('<div class="ui negative message"><i class="close icon"></i><div class="header">Error!</div><p>'+t+"</p></div>"),$(e).show(1e3).delay(a).fadeOut()}function t(e,t,a){$(e).html('<div class="ui success message"><i class="close icon"></i><div class="header">Éxito!</div><p>'+t+"</p></div>"),$(e).show(1e3).delay(a).fadeOut()}function a(e){for(var t,a,n,o,r,i,s="",l=e.length,d="",c=0;c<l;c++)t=moment(e[c].x_timestamp),a=t.unix(),n=t.format("DD/MM/YYYY hh:mm:ss A"),o=e[c].x_fname?e[c].x_fname:" ",r=e[c].x_lname?e[c].x_lname:" ",i=o+" "+r,d=35===e[c].x_hist_type?"<div class='ui red label'>Acceso Denegado</div>":33===e[c].x_hist_type?"<div class='ui green label'>Tarjeta Inválida</div>":37===e[c].x_hist_type?"<div class='ui orange label'>Fuera de Horario</div>":"<div class='ui green label'>Puerta Abierta</div>",s+="<tr>",s+="<td>"+e[c].x_term_name+"</td>",s+="<td>"+i+"</td>",s+="<td>"+d+"</td>",s+='<td data-order="'+a+'">'+n+"</td>",s+="</tr>";return s}function n(e){for(var t,a,n,o,r,i,s="",l=e.length,d=0;d<l;d++)t=moment(e[d].c_s_timestamp),a=t.unix(),n=t.format("DD/MM/YYYY"),o=e[d].c_fname,r=e[d].c_lname,i=e[d].dept_name,null===i&&(i="Sin asignar"),s+="<tr>",s+="<td>"+o+"</td>",s+="<td>"+r+"</td>",s+="<td>"+i+"</td>",s+='<td data-order="'+a+'">'+n+"</td>",s+="</tr>";return s}function o(e){if(s(e)){var t=e.DataTable({order:[[3,"desc"]],language:{url:"extras/SpanishDatatable.json"}});return t}return!1}function r(e,t){if(s(e)){var a=e.DataTable({order:t,language:{url:"extras/SpanishDatatable.json"}});return a}return!1}function i(e){e.destroy()}function s(e){return e.length>0}function l(e,t){return i(t),o(e)}function d(e){$.ajax({url:app_url+"settings/settings/getGeneralUpdateTimeAjax",type:"POST",dataType:"json",async:!1,success:function(t){e(t.time)},error:function(t,a){e(30)}})}function c(){$.ajax({url:app_url+"main/main/getLastActionsAJAX",type:"POST",dataType:"json",success:function(e){if(e.error===!1){i(g);var t=a(e.events);$("#lastDoorMov-body").html(t),g=o(v)}},error:function(e,t){console.log("Request: "+JSON.stringify(e)),console.log("Error: "+JSON.stringify(t))}})}window.showErrorMessage=e,window.showSuccessMessage=t,window.createDoorsEventsResultBody=a,window.createPermissionTableBody=n,window.createDataTable=o,window.createCallsDataTable=r,window.destroyDataTable=i,window.reinitialiseDataTable=l,window.getGeneralUpdateTime=d;var u=3e4;d(function(e){u=1e3*e});var v=$("#lastDoorMov"),g=o(v);$("#lastDoorMov").length>0&&setInterval(c,u)}),$(document).ready(function(){$(".ui.dropdown").dropdown(),$(".ui.checkbox").checkbox(),$(".ui.tabular.menu.settings .item").tab(),$(".start-date").calendar({formatter:{date:function(e,t){if(!e)return"";var a=e.getDate(),n=e.getMonth()+1,o=e.getFullYear();return a+"-"+n+"-"+o}},type:"date"}),$(".start-time").calendar({ampm:!1,type:"time"}),$(".end-date").calendar({monthFirst:!1,formatter:{date:function(e,t){if(!e)return"";var a=e.getDate(),n=e.getMonth()+1,o=e.getFullYear();return a+"-"+n+"-"+o}},type:"date"}),$(".end-time").calendar({ampm:!1,type:"time"}),$("#calendar").fullCalendar({locale:"es",contentHeight:700,aspectRatio:2,googleCalendarApiKey:"AIzaSyDrzlzwx-cXpWGkvdTA9A4Y_RCAlr7yMe0",eventSources:[{googleCalendarId:"hotelplazameru.com_7vjklt6bgoahjqcdjj46dkr97k@group.calendar.google.com",className:"single-event"},{googleCalendarId:"es.ve#holiday@group.v.calendar.google.com",className:"ve-holidays"},{googleCalendarId:"es.christian#holiday@group.v.calendar.google.com",className:"christian-holidays"},{googleCalendarId:"hotelplazameru.com_73u3a4jbirr6eh6b4nvlve7sro@group.calendar.google.com",className:"christian-holidays"},{googleCalendarId:"hotelplazameru.com_fp4rlsjstr7casv20044pabd6k@group.calendar.google.com",className:"event-birthday"},{googleCalendarId:"hotelplazameru.com_cuqdhkssdm7e8u02ccnmun6vf0@group.calendar.google.com",className:"event-wedding"},{googleCalendarId:"hotelplazameru.com_vpv203etpdor4n9mu8po5o6lto@group.calendar.google.com",className:"event-executive"}],eventClick:function(e,t,a){if(t.preventDefault(),showEventDetailsModal(e),e.url)return!1}}),$("#calendar-segment").vegas({slides:[{src:"dist/images/banner.jpg"},{src:"dist/images/hotels-desktop.jpg"},{src:"dist/images/restaurant.jpg"},{src:"dist/images/town.jpg"}],overlay:"bower_components/vegas/dist/overlays/06.png"})}),$(document).ready(function(){function e(e){var t="https://maps.google.com/maps?hl=es&q=";if("undefined"!=typeof e.title?$("#eventTitle").html(e.title):$("#eventTitle").html("Evento sin título"),"undefined"!=typeof e.description?($("#descriptionContent").html(e.description),$("#eventDescription").show()):$("#eventDescription").hide(),"undefined"!=typeof e.location){var a=e.location.replace(/ /g,"+"),n=t+a,o="<a href='"+n+"' target='_blank'>(Ver mapa)</a>";$("#locationContent").html(e.location+" "+o),$("#eventLocation").show()}else $("#eventLocation").hide();var r=moment.duration(e.end.diff(e.start)),i=r.asHours();return 24===i?($("#singleDate").html(e.start.format("DD/MM/YYYY")),$("#eventDate").show(),$("#eventDurationStart").hide(),$("#eventDurationEnd").hide()):($("#eventDate").hide(),$("#startDate").html(e.start.format("DD/MM/YYYY hh:mm A")),$("#endDate").html(e.end.format("DD/MM/YYYY hh:mm A")),$("#eventDurationStart").show(),$("#eventDurationEnd").show()),$(".ui.modal").modal({blurring:!0}).modal("setting","transition","vertical flip").modal("show"),!1}window.showEventDetailsModal=e;var t=!0;$(".button.single-event").click(function(){t?($(".fc-event.single-event").hide(),t=!1):($(".fc-event.single-event").show(),t=!0)});var a=!0;$(".button.ve-holidays").click(function(){a?($(".fc-event.ve-holidays").hide(),a=!1):($(".fc-event.ve-holidays").show(),a=!0)});var n=!0;$(".button.christian-holidays").click(function(){n?($(".fc-event.christian-holidays").hide(),n=!1):($(".fc-event.christian-holidays").show(),n=!0)});var o=!0;$(".button.event-birthday").click(function(){o?($(".fc-event.event-birthday").hide(),o=!1):($(".fc-event.event-birthday").show(),o=!0)});var r=!0;$(".button.event-wedding").click(function(){r?($(".fc-event.event-wedding").hide(),r=!1):($(".fc-event.event-wedding").show(),r=!0)});var i=!0;$(".button.event-executive").click(function(){i?($(".fc-event.event-executive").hide(),i=!1):($(".fc-event.event-executive").show(),i=!0)});var s=!0;$(".button.event-bank").click(function(){s?($(".fc-event.event-bank").hide(),s=!1):($(".fc-event.event-bank").show(),s=!0)})});
//# sourceMappingURL=main.js.map
