{"version":3,"sources":["../assets/scripts/schedule.js","../assets/scripts/users.js","../assets/scripts/doors.js"],"names":["$","document","ready","searchScheduleAJAX","ajax","url","app_url","type","data","main_schedule_form","dataType","beforeSend","show","success","hide","error","showErrorMessage","msg","destroyDataTable","scheduleTable","events","createDoorsEventsResultBody","html","createDataTable","scheduleSelector","do_again","setInterval","request","console","log","JSON","stringify","click","serialize","searchUsersAJAX","user_list","length","options","users","tam","i","c_id","b_guid","c_fname","c_lname","append","user_items","find","accessOptions","result","tp_term_id","tp_term_name","tp_guid","accessItems","items","search_user_moves","user","door","user_id","door_name","usersTable","usersSelector","login_user","login_values","async","response","delay","fadeOut","window","location","href","user_id_to_search","door_name_to_search","access_items","on","this","val","guid","attr","default_select","hasClass","addClass","access","select","removeClass","access_selector","e","submit","preventDefault","searchDoorMovsAJAX","door_id","door_guid","start_date","start_time","end_date","end_time","doorsTable","doorsSelector","do_again_doors","door_selector"],"mappings":"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","file":"events.js","sourcesContent":["$(document).ready(function() {\r\n    var scheduleSelector = $('#schedule-result-list-table');\r\n    var scheduleTable = createDataTable(scheduleSelector);\r\n    var main_schedule_form = \"\";\r\n    var do_again = 0;\r\n    function searchScheduleAJAX(){\r\n        // console.log(\"asd\");\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/searchEventsBySchedule\",\r\n            type: \"POST\",\r\n            data: main_schedule_form,\r\n            dataType: \"json\",\r\n            beforeSend: function(){\r\n                $(\"#schedule-loading\").show();\r\n            },\r\n            success: function(data){\r\n                $(\"#schedule-loading\").hide(1000);\r\n                if (data.error===true) {\r\n                    showErrorMessage('#schedule-message',data.msg,5000);\r\n                }else{\r\n                    destroyDataTable(scheduleTable);\r\n                    var events = createDoorsEventsResultBody(data.events);\r\n                    $(\"#schedule-result-list-body\").html(events);\r\n                    scheduleTable = createDataTable(scheduleSelector);\r\n                    $(\"#schedule-result-list\").show();\r\n                    if(do_again < 1) {\r\n                        do_again = 1;\r\n                        setInterval(searchScheduleAJAX, 20000);\r\n                    }\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    }\r\n    $(\"#search-schedule\").click(function () {\r\n        main_schedule_form = $('#schedule-form').serialize();\r\n        searchScheduleAJAX(0);\r\n    });\r\n});\r\n","$(document).ready(function() {\r\n    var user_id_to_search = 0;\r\n    var door_name_to_search = '*';\r\n    var user_items = $(\".user-select-search\").find('.item');\r\n\r\n    var access_items = $(\".access-select-search\").find('.item');\r\n    /**\r\n     * Serach user via AJAX\r\n     */\r\n    function searchUsersAJAX(){\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/getUserAJAX\",\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            success: function(data){\r\n                var user_list = $('.user-select-search');\r\n                if(data.error===false && user_list.length>0){\r\n                    $(\".user-select-search\").html('');\r\n                    var users = data.users;\r\n                    var options = '';\r\n                    var tam = data.users.length;\r\n                    for(var i = 0; i < tam; i++){\r\n                        options += '<div class=\"link item user-item\" data-id=\"'+data.users[i].c_id+'\" data-guid=\"'+data.users[i].b_guid+'\">'+data.users[i].c_fname+' '+data.users[i].c_lname+'</div>';\r\n                    }\r\n                    $(\".user-select-search\").append(options);\r\n                    user_items = $(\".user-select-search\").find('.item');\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     *  User search select (Unused)\r\n     */\r\n    $('body').on('change', '#user-search', function() {\r\n        var user = $(this).val();\r\n        var guid = $(this).find(':selected').attr('data-guid');\r\n        var default_select = $(\"#access-content\").find('.ui.dropdown.selection');\r\n        $(\"#user-access\").val([]);\r\n        if(!default_select.hasClass(\"disabled\")){\r\n            $(\"#user-access\").html('<option>Accesos</option>');\r\n            default_select.addClass('disabled');\r\n        }\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/getUserTerminalAccess\",\r\n            type: \"POST\",\r\n            data: {'user_id':user,'guid':guid},\r\n            dataType: \"json\",\r\n            success: function(data){\r\n                if(data.error===false){\r\n                    var options = accessOptions(data.access);\r\n                    var select = $(\"#access-content\").find('.ui.disabled.dropdown.selection');\r\n                    select.removeClass('disabled');\r\n                    $(\"#user-access\").html(options);\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    });\r\n    if($(\".user-select-search\").length>0){\r\n        setInterval(searchUsersAJAX, 20000);\r\n    }\r\n    function accessOptions(result){\r\n        var options = '<option>Accesos</option>';\r\n        var tam = result.length;\r\n        for (var i = 0; i < tam; i++) {\r\n            options += '<option value=\"'+result[i].tp_term_id+'\" data-name=\"'+result[i].tp_term_name+'\" data-guid=\"'+result[i].tp_guid+'\">'+result[i].tp_term_name+'</option>';\r\n        }\r\n        return options;\r\n    }\r\n    var usersSelector = $('#user-result-list-table');\r\n    var usersTable = createDataTable(usersSelector);\r\n\r\n    $(\"#search-users\").click(function () {\r\n        var user_id = $('#user-search').find(\":selected\").val();\r\n        var access_selector = $('#user-access').find(\":selected\");\r\n        var door_name = access_selector.attr(\"data-name\");\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/searchEventByUsersAndAccess\",\r\n            type: \"POST\",\r\n            data: {'user_id':user_id,'door_name':door_name},\r\n            dataType: \"json\",\r\n            beforeSend: function(){\r\n                $(\"#users-loading\").show();\r\n            },\r\n            success: function(data){\r\n                $(\"#users-loading\").hide(1000);\r\n                if (data.error===true) {\r\n                    showErrorMessage('#users-message',data.msg,5000);\r\n                }else{\r\n                    destroyDataTable(usersTable);\r\n                    var events = createDoorsEventsResultBody(data.events);\r\n                    $(\"#user-result-list-body\").html(events);\r\n                    usersTable = createDataTable(usersSelector);\r\n                    $(\"#users-result-list\").show();\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    });\r\n    function accessItems(result){\r\n        var items = '';\r\n        var tam = result.length;\r\n        for (var i = 0; i < tam; i++) {\r\n            items += '<div class=\"link item\" data-id=\"'+result[i].tp_term_id+'\" data-name=\"'+result[i].tp_term_name+'\" data-guid=\"'+result[i].tp_guid+'\">'+result[i].tp_term_name+'</div>';\r\n        }\r\n        return items;\r\n    }\r\n\r\n    /**\r\n     * Search Terminal by User\r\n     */\r\n    $(\".user-select-search\").on(\"click\", \".user-item\", function(){\r\n        var contenido = $(this).html();\r\n        var user = $(this).data('id');\r\n        user_id_to_search = user;\r\n        var guid = $(this).data('guid');\r\n        $(\".access-column\").hide();\r\n        $(\".access-select-search\").html('');\r\n        $(\"#users-result-list\").hide();\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/getUserTerminalAccess\",\r\n            type: \"POST\",\r\n            data: {'user_id':user,'guid':guid},\r\n            dataType: \"json\",\r\n            success: function(data){\r\n                if(data.error===false){\r\n                    var items = accessItems(data.access);\r\n                    $(\".access-select-search\").html(items);\r\n                    $(\".access-column\").show();\r\n                    access_items = $(\".access-select-search\").find('.item');\r\n                    $(access_items).click(function(e) {\r\n                        var door_name = $(this).data('name');\r\n                        door_name_to_search = door_name;\r\n                        search_user_moves(user_id_to_search,door_name_to_search);\r\n                    });\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    });\r\n\r\n    $(access_items).click(function(e) {\r\n        var door_name = $(this).data('name');\r\n        door_name_to_search = door_name;\r\n        console.log('el nombre de la peuerta es' + door_name_to_search);\r\n        search_user_moves(user_id_to_search,door_name_to_search);\r\n    });\r\n    /**\r\n     * Search user moves by door id (terminal) and user id\r\n     * @param user\r\n     * @param door\r\n     */\r\n    function search_user_moves(user,door){\r\n        $(\"#users-result-list\").hide();\r\n        $(\"#users-message\").hide();\r\n        $.ajax({\r\n            url: app_url + \"doors/doors/searchEventByUsersAndAccess\",\r\n            type: \"POST\",\r\n            data: {'user_id': user, 'door_name': door},\r\n            dataType: \"json\",\r\n            beforeSend: function () {\r\n                $(\"#users-loading\").show();\r\n            },\r\n            success: function (data) {\r\n                $(\"#users-loading\").hide(1000);\r\n                if (data.error === true) {\r\n                    showErrorMessage('#users-message', data.msg, 5000);\r\n                } else {\r\n                    destroyDataTable(usersTable);\r\n                    var events = createDoorsEventsResultBody(data.events);\r\n                    $(\"#user-result-list-body\").html(events);\r\n                    usersTable = createDataTable(usersSelector);\r\n                    $(\"#users-result-list\").show();\r\n                }\r\n            },\r\n            error: function (request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    }\r\n    function login_user(){\r\n        var login_values = $(\"#login-form\").serialize();\r\n        $.ajax({\r\n            url: app_url  + \"settings/settings/auth_user_ajax\",\r\n            type: \"POST\",\r\n            data: login_values,\r\n            async: false,\r\n            dataType: \"json\",\r\n            success: function (response) {\r\n                console.log(\"respuesta: \" + JSON.stringify(response));\r\n                if(response.error){\r\n                    $(\".login-message\").html(\"<h4><i class=\\\"close icon\\\"></i> Error!</h4><p>\"+response.msg+\"</p>\" );\r\n                    $(\".login-message\").show(1000).delay(3000).fadeOut();\r\n                }else{\r\n                    //setTimeout(function () {\r\n                    window.location.href = app_url  + 'main';\r\n                    //}, 1000);\r\n                }\r\n            },\r\n            error: function (request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    }\r\n    $('#login-button').click(function(e) {\r\n        login_user();\r\n    });\r\n    $('#login-form').submit(function(e){\r\n        console.log('formulario enviado');\r\n        login_user();\r\n        e.preventDefault();\r\n    });\r\n});\r\n","$(document).ready(function() {\r\n    var doorsSelector = $('#doors-result-list-table');\r\n    var doorsTable = createDataTable(doorsSelector);\r\n\r\n    var door_selector;\r\n    var door_id;\r\n    var door_name;\r\n    var door_guid;\r\n    var start_date;\r\n    var start_time;\r\n    var end_date;\r\n    var end_time;\r\n    var do_again_doors = 0;\r\n\r\n    function searchDoorMovsAJAX(){\r\n        // console.log(\"estoy buscando\");\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/searchEventByDoorAndSchedule\",\r\n            type: \"POST\",\r\n            data: {\r\n                'door_id':door_id,\r\n                'door_name':door_name,\r\n                'door_guid':door_guid,\r\n                'start_date':start_date,\r\n                'start_time':start_time,\r\n                'end_date':end_date,\r\n                'end_time':end_time\r\n            },\r\n            dataType: \"json\",\r\n            beforeSend: function(){\r\n                $(\"#door-loading\").show();\r\n            },\r\n            success: function(data){\r\n                $(\"#door-loading\").hide(1000);\r\n                if (data.error===true) {\r\n                    showErrorMessage('#doors-message',data.msg,5000);\r\n                }else{\r\n                    destroyDataTable(doorsTable);\r\n                    var events = createDoorsEventsResultBody(data.events);\r\n                    $(\"#doors-result-list-body\").html(events);\r\n                    doorsTable = createDataTable(doorsSelector);\r\n                    $(\"#doors-result-list\").show();\r\n                    if(do_again_doors < 1) {\r\n                        do_again_doors = 1;\r\n                        setInterval(searchDoorMovsAJAX, 20000);\r\n                    }\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    }\r\n    $(\"#search-doors\").click(function () {\r\n        door_selector = $('#doors-search').find(\":selected\");\r\n        door_id = door_selector.val();\r\n        door_name = door_selector.attr(\"data-name\");\r\n        door_guid = door_selector.attr(\"data-guid\");\r\n        start_date = $('#start_date').val();\r\n        start_time = $('#start_time').val();\r\n        end_date = $('#end_date').val();\r\n        end_time = $('#end_time').val();\r\n        searchDoorMovsAJAX();\r\n    });\r\n});\r\n"],"sourceRoot":"assets/scripts/"}